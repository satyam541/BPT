//phone code start
$.ajax({
    url: countryjsonurl,
    type:'get',
    dataType: 'json',
    success: function(response)
    {
        var options = "";
        $.each(response, function(index, value){
            options += "<option data-index="+index+' value="'+value.code+'"   data-phone-code="'+value.dial_code+'" data-country-id="'+index+'" data-country-name="'+value.name+'">'+value.code+'&emsp;&emsp; - &emsp;&emsp;'+value.name+'</option>';
        });
        $('select.country-code').html(options).trigger('change');
    }
});

$("select.country-code").on('change', function(e){

    var phonecode = $(this).find(':selected').data('phone-code');
    var countrycode = $(this).find(':selected').val();
  
    $(this).closest('.phonecode-field').find('span.prefix').text(phonecode);
    var prefix = $(this).closest('.phonecode-field').find('span.prefix').text();
    $(this).closest('.phonecode-field').find('input.telephone').val('').trigger('change');
    $(this).closest('.phonecode-field').find('input.phonenumber').val(prefix);
    $(this).closest('.phonecode-field').find('input.phonecode').val(phonecode);
    $(this).closest('.phonecode-field').find('input.countrycode').val(countrycode);
   
});
$('input.telephone').on('focusout', function(event){

      var prefix       =  $(this).closest('.phonecode-field').find('span.prefix').text();
      var phonecode    =  $(this).closest('.phonecode-field').find(':selected').data('phone-code');
      var countrycode  =  $(this).closest('.phonecode-field').find(':selected').val();

     
    var data = $(this).val();

    if(data.startsWith('0'))
    {
        data = data.substring(1,data.length);
    }

    var number = prefix + data;
    $(this).closest('.phonecode-field').find('input.phonenumber').val(number);
    $(this).closest('.phonecode-field').find('input.phonecode').val(phonecode);
    $(this).closest('.phonecode-field').find('input.countrycode').val(countrycode);
    


});

function filterSchedules(e,t,s){$(".loading-image-eq").show(),window.location.href=URL+"/"+t+"/"+e+"#schedules"}function showScheduleEntries(e,t,s,a){$.ajax({url:URL+"/courses/showScheduleEntries",type:"post",data:{entries:e,courseId:s,_token:a},success:function(e){window.location.href=URL+"/"+t+"#schedules",location.reload()}})}function filterByAlpha(e){var t=$(".alphabets > li"),s=$(".contentRows"),a=$(".contentRows .contentRow a"),o=$(".contentAdd");t.removeClass("active"),$("#"+e).addClass("active"),s.hide(),o.html(""),$(a).each(function(){var t=$(this).find(".loc-text").text();if(RegExp("^"+e).test(t)||"all"==e){var s='<div class="locationBtn text-left contentRow"><a href="'+$(this).attr("href")+'" title="View '+t+' Details"><span class="loc-icn"><img src="'+URL+'/images/icons/destination-point.png" alt="Location"></span><span class="loc-text">'+t+'</span><span class="loc-icn-arw"><img src="'+URL+'/images/icons/arrow-right-w.png" class="arw1"><img src="'+URL+'/images/icons/arrow-right.png" class="arw"> </span></a></div>';o.html(o.html()+s)}}),""==o.html()&&o.html("<p>Sorry, There are no locations starting with "+e+".</p>")}function filterlocations(e){filter=e.toUpperCase();var t=$(".contentRows"),s=$(".contentRows .contentRow a"),a=$(".contentAdd");t.hide(),a.html(""),$(s).each(function(){var e=$(this).find(".loc-text").text();if(e.toUpperCase().indexOf(filter)>-1){var t='<div class="btn-loc col-sm-4 col-md-3 text-left contentRow"><a href="'+$(this).attr("href")+'" title="'+e+'"><i class="fa fa-globe"></i> <span class="loc-text">'+e+"</span></a></div>";a.html(a.html()+t)}}),""==a.html()&&a.html("<p>Sorry, There are no locations starting with "+alphabet+".</p>")}function initializeMap(e,t,s,a,o){var l;l=""!=a?a:e[0][3];var n={zoom:s,scrollwheel:!1,center:new google.maps.LatLng(e[0][1],e[0][2]),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"water",elementType:"all",stylers:[{color:"#55575b"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#55575b"}]}]},i=new google.maps.Map($("#map")[0],n);(new google.maps.Geocoder).geocode({address:l},function(s,a){if(a==google.maps.GeocoderStatus.OK){i.setCenter(s[0].geometry.location);var l,n,r=new google.maps.InfoWindow;for(n=0;n<e.length;n++)l=new google.maps.Marker({position:new google.maps.LatLng(e[n][1],e[n][2]),icon:t,animation:google.maps.Animation.DROP,map:i}),google.maps.event.addListener(l,"mouseover",function(t,s){return function(){r.setContent("<div class='iw-container'><div class='iw-title'>Office Address</div><div class='iw-content'><div class='address'><span class='left'>Address:</span> <span>"+e[s][3]+"</span></div><div class='phone'><span class='left'>Telephone: </span>"+e[s][4]+"</div><div class='email'><span class='left'>Email: </span> "+e[s][5]+"</div></div>"),r.open(i,t)}}(l,n)),google.maps.event.addListener(l,"mouseout",function(e,t){return function(){r.setContent(""),r.close(i,e)}}(l)),1==o&&(r.setContent("<div class='iw-container'><div class='iw-title'>Office Address</div><div class='iw-content'><div class='address'><span class='left'>Address:</span> <span>"+e[n][3]+"</span></div><div class='phone'><span class='left'>Phone: </span><span> "+e[n][4]+"</span></div><div class='email'><span class='left'>, Email: </span> <span> "+e[n][5]+"</span> </div></div>"),r.open(i,l)),google.maps.event.addListener(r,"domready",function(){var e=$(".gm-style-iw").prev();e.children(":nth-child(2)").css({background:"rgba(255,255,255,0.8)","border-radius":"20px"}),e.children(":nth-child(4)").css({background:"rgba(255,255,255,0.8)","border-radius":"20px"})})}})}function resetForm(e,t,s,a){void 0==t&&(t=""),void 0==s&&(s=""),void 0==a&&(a=""),$("#modalForm").css("display","block"),$("#myModal .alert-danger").css("display","none"),$("#myModal .success").css("display","none"),$("#modalForm").trigger("reset"),$("#formType").val(e),$("#courseName").val(t),$("#enquiry-text").text(""),"Request CallBack"==e?($("#myModalLabel").html("Request <span>Callback</span>"),$("#modalButton").html("<span>Submit Request</span>")):"Get a Quote"==e?($("#myModalLabel").html("Get a<span> Quote</span>"),$("#modalButton").html("<span>Submit Request</span>")):($("#myModalLabel").html("Have a Query?"),$("#modalButton").html('Submit Your Message<i class"fa fa-long-arrow-right"></i>'),"Schedule"==e?$("#schedule").val(s):"Online Course"==e||"Online Course Booking"==e?$("#package").val(s):"Bundle"==e&&$("#courseId").val(s),""!=t&&(""!=a&&(a=", "+a),$("#enquiry-text").text("Enquiry For "+t+a)))}var URL=window.location.origin;$(document).ready(function(){function e(){$(".text-toggle").each(function(){$(this).height()>=250?$(this).next(".moreless").css("display","block"):($(this).addClass("toggle"),$(this).next(".moreless").css("display","none"))})}$("#overlays, .callus").click(function(){$("#overlays").removeClass("nav-add-overlay")}),$(".finder").click(function(){$("#overlays").toggleClass("nav-add-overlay")}),e(),$(".ui-accordion-header").click(function(){e()}),$(".action-toggle").click(function(e){e.preventDefault();var t=$(this).attr("href");$(t).toggleClass("toggle"),$(t).hasClass("toggle")?($(this).addClass("show-less"),$(this).html("Show Less <i class='fa fa-chevron-up'></i>")):($(this).removeClass("show-less"),$(this).html("Show More <i class='fa fa-chevron-down'></i>"))}),$(".search-btn").click(function(e){""==$(".courseDisplayName option:selected").text()&&(e.preventDefault(),$(".courseDisplayName").select2("open"))}),$(".about-program img, .faqs img, .contentdivision img").addClass("zoomImg");var t=document.getElementById("imgModal");$(".zoomImg").click(function(){$("#imgModal").css("display","block"),$("#zoomedImg").attr("src",this.src),$("#caption").html(this.alt)}),document.getElementsByClassName("close")[0].onclick=function(){t.style.display="none"},$(".owl-carousel").owlCarousel({loop:!0,slideSpeed:8e3,navText:['<img src="images/icons/nav-left.png" />','<img src="images/icons/nav-right.png" />'],autoplay:!0,autoplaySpeed:3e3,autoplayHoverPause:!0,autoHeightClass:"myowl-height",margin:0,responsiveClass:!0,responsive:{0:{items:1,nav:!0},600:{items:1,nav:!1},1e3:{items:1,nav:!0}}});var s={header:"iconClosed",activeHeader:"iconOpen"};$(".accordion").accordion({icons:s,heightStyle:"content",collapsible:!0}),$("#map").css("pointer-events","none"),$(".map").click(function(e){$("#map").css("pointer-events","all")}).mouseleave(function(e){$("#map").css("pointer-events","none")}),$("#scroll-to a").click(function(){$("#scroll-to a").removeClass("active"),$(this).addClass("active")}),$("#goto, #goto2, #goto3, #goto4, #goto5, #goto6, #goto1, #goto7,#goto8, #goToTop, #sm1, #sm2, #sm3, #sm4, #sm5").on("click",function(e){e.preventDefault();var t=this.hash;$("html, body").animate({scrollTop:$(t).offset().top-55},800,function(){window.location.hash=t})}),$(".hslug").val(""),$(".select2courses").select2({placeholder:"Find your training course...",tags:false,ajax:{url:URL+"/autocomplete/courses",dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e){return{results:$.map(e,function(e){return $(".hslug").val(e.slug),{text:e.value,id:e.id,slug:e.slug}})}},cache:!1}}),$(".select2courses").on("select2:open",function(e){$(this).closest("li.open > .dropdown-menu").css("display","block")}),$(".select2courses").on("select2:close",function(e){var t=$(this).select2("data")[0].slug;$(".courseDisplayName").find("option").each(function(e,s){if($(this).attr("data-select2-tag")&&void 0==t){var a=$(this).text();$(".select2courses").val(a).select2()}})}),$(".select2courses.crs").on("select2:select",function(e){var t=$(this).select2("data")[0].slug,s=$(".courseDisplayName option:selected").text();void 0!=t&&t!=s&&($(".hslug").val(t),window.location.href=URL+"/"+t)}),$(".select2courses.crs").on("change",function(e){var t=$(this).select2("data")[0].slug,s=$(".courseDisplayName option:selected").text();void 0!=t&&t!=s&&($(".hslug").val(t),window.location.href=URL+"/"+t),$(this).closest("form").submit()}),$(".select2courses.loc").on("select2:select",function(e){var t=$(this).select2("data")[0].slug;$(".hslug").val(t)}),$(".locSearch").submit(function(e){var t=$(".courseDisplayName option:selected").text(),s=$(this).find("select[name='venue']").val().toLowerCase();""==t&""!=s&&(e.preventDefault(),$(".hslug").val(""),window.location.href=URL+"/locations/"+s);var a=$(this).find(".select2courses.loc").select2("data")[0].slug;void 0==a&""!=t||a!=t&&(e.preventDefault(),urlParam=a,""!=s&&(urlParam+="/"+s),window.location.href=URL+"/"+urlParam)}),$(".enquiryForm").on("submit",function(e){var t=$(this).serialize();return $(".loading-image-eq").show(),$.ajax({url:URL+"/enquiry",type:"post",dataType:"JSON",data:t,success:function(e){$.each(e,function(e,t){if("Errors"==e){var s="";$.each(t,function(e){s+="<li>"+t[e]+"</li>"}),$(".alert-danger").html("<ul>"+s+"</ul>"),$(".alert-danger").show()}"MailError"==e&&($(".alert-danger").html("<ul><li>"+t+"</li></ul>"),$(".alert-danger").show()),"Success"==e&&($(".enquiryForm").hide(),$(".alert-danger").hide(),$(".alert-success").show(),$(".success").show())})},complete:function(){$(".loading-image-eq").hide()},error:function(){$(".alert-danger").html("Sorry, Please try again later !"),$(".alert-danger").show()}}),!1}),$("#modalForm").on("submit",function(e){var t=$(this).serialize();return $(".loading-image-eq").show(),$.ajax({url:URL+"/enquiry",type:"post",dataType:"JSON",data:t,success:function(e){$.each(e,function(e,t){if("Errors"==e){var s="";$.each(t,function(e){s+="<li>"+t[e]+"</li>"}),$(".alert-danger").html("<ul>"+s+"</ul>"),$(".alert-danger").css("display","block")}"MailError"==e&&($(".alert-danger").html("<ul><li>"+t+"</li></ul>"),$(".alert-danger").css("display","block")),"Success"==e&&($("#modalForm").css("display","none"),$(".alert-danger").css("display","none"),$(".success").css("display","block"))})},complete:function(){$(".loading-image-eq").hide()},error:function(){$(".alert-danger").html("Sorry, Please try again later !"),$(".alert-danger").css("display","block")}}),!1}),$(".filterdates").click(function(){$(".datesbox").each(function(){$(this).show()}),$(".filterdates").each(function(){$(this).attr("id");$(this).is(":checked")||$("#filter-"+$(this).attr("id")).hide()})})}),$(document).ready(function(){var e={header:"iconClosed",activeHeader:"iconOpen"};$(".accordion").accordion({icons:e,heightStyle:"content",collapsible:!0}),$(".owl-carousel").owlCarousel({loop:!0,slideSpeed:8e3,navText:['<img src="images/icons/nav-left.png" />','<img src="images/icons/nav-right.png" />'],autoplay:!0,autoplaySpeed:3e3,autoplayHoverPause:!0,autoHeightClass:"myowl-height",margin:0,responsiveClass:!0,responsive:{0:{items:1,nav:!0},600:{items:1,nav:!1},1e3:{items:1,nav:!0}}})});